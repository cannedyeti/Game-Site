<script>
	function Character(name, damage, health, critChance, missChance) {
		this.name = name;
		this.damage = damage;
		this.health = health;
		this.critChance = critChance;
		this.missChance = missChance;
		this.hit = function() {
			return Math.floor(Math.random() * 100) > this.missChance;
		}
		this.crit = function() {
			return Math.floor(Math.random() * 100) <= this.critChance;
		}

		this.heal = function() {
			this.health += 5;
		}
		this.deal = function() {
			if (this.hit()) {
				this.attack(); 
			}
			else {
				alert(this.name + " missed!");
			}
		}

}
	//Characters
	var hero = new Character("Mark", 10, 100, 20, 5);
	var villian = new Character("Bubba", 15, 100, 5, 10);


	//Hero attacks
	hero.attack = function() {
			if (hero.crit()) {
				villian.health -= hero.damage * 2;
				alert("Critical Strike!")
			}
			else {
				villian.health -= hero.damage;
			}
	}
	//Villian attacks
	villian.attack = function() {
		if (villian.crit()) {
				hero.health -= villian.damage * 2;
				alert(hero.name + " has been crit!")
			}
			else {
				hero.health -= villian.damage;
			}
	}
  //villian choice
	villianAttack = function() {
		if	(Math.floor(Math.random() * 100) >= 60)
		{
			villian.deal();
		}
		else{
			villian.heal();
			alert(villian.name + " healed!");
		}	
	}

	//Hero's choice
	choose = function() {
		var choice = prompt(hero.name + "\'s health is " + hero.health +". " + "Your enemy " + villian.name + "\'s health is at " + villian.health + ". " + " Would you like to attack or heal?");
		if (choice == "attack"){
			hero.deal();
		}
		else {
			hero.heal();
		}
	}





	//running code
	hero.name = prompt("What is your name?");
	villian.name = prompt("Who is your worst enemy?")

	while (hero.health > 0 && villian.health > 0) {
		choose();
		villianAttack();
	}

  if (hero.health <= 0) {
		alert("You lose!");
	}

	if (villian.health <= 0) {
		alert("You win!");
	}





</script>
